<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Pi Network Barter Application - Pro Full Feature UI" />
    <title>Barter-Pi Pro - Final UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        /* ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤ ‡§¨‡§æ‡§∞ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï) */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel" data-presets="react">
        const { useState, useEffect } = React;

        // --- Static Configuration & Dummy Data ---
        const DUMMY_USER_ID = "ADM_PRO_USER_007";
        const ADMIN_ID = DUMMY_USER_ID; 

        // Utility: Get a random placeholder image
        const getImage = (text) => `https://via.placeholder.com/400x300?text=${text}`;

        const DUMMY_LISTINGS = [
            { id: 'l1', itemName: 'Apple iPhone 14 Pro', description: '‡§¨‡•ç‡§∞‡§æ‡§Ç‡§° ‡§®‡•ç‡§Ø‡•Ç, ‡§∏‡•Ä‡§≤ ‡§™‡•à‡§ï‡•§ 256GB, ‡§°‡•Ä‡§™ ‡§™‡§∞‡•ç‡§™‡§≤‡•§ ‡§µ‡§ø‡§®‡§ø‡§Æ‡§Ø (Barter) ‡§Ø‡§æ Pi ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡•§', pricePi: 450, status: 'Active', posterId: 'user_a01b2c3d', image: getImage('iPhone+14+Pro'), category: 'Electronics', location: 'Local', delivery: 'Local Pickup' },
            { id: 'l2', itemName: '‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§∏‡§æ‡§á‡§ï‡§ø‡§≤', description: '‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§∂‡•Ä‡§≤ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç, ‡§•‡•ã‡§°‡§º‡•Ä ‡§Æ‡§∞‡§Æ‡•ç‡§Æ‡§§ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§ ‡§ï‡•á‡§µ‡§≤ ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§™‡§ø‡§ï‡§Ö‡§™‡•§', pricePi: 5, status: 'Active', posterId: 'user_e4f5g6h7', image: getImage('Bicycle'), category: 'Vehicles', location: 'Global', delivery: 'Shipping' },
            { id: 'l3', itemName: '‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§°‡§ø‡§ú‡§æ‡§á‡§® ‡§∏‡•á‡§µ‡§æ (NFT)', description: '‡§è‡§ï ‡§™‡•á‡§ú ‡§ï‡•Ä ‡§≤‡•à‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§™‡•á‡§ú ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡§æ ‡§Ü‡§ï‡§∞‡•ç‡§∑‡§ï ‡§°‡§ø‡§ú‡§æ‡§á‡§®‡•§ 3 ‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä‡•§ ‡§Ø‡§π ‡§è‡§ï NFT ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§Ü‡§§‡§æ ‡§π‡•à‡•§', pricePi: 50, status: 'Pending', posterId: 'user_i8j9k0l1', image: getImage('Web+Design+NFT'), category: 'Services', location: 'Global', delivery: 'Digital' },
            { id: 'l4', itemName: 'Pi ‡§Æ‡§æ‡§á‡§®‡§ø‡§Ç‡§ó ‡§®‡•ã‡§° ‡§∏‡•á‡§ü‡§Ö‡§™', description: '‡§Ö‡§™‡§®‡•á Raspberry Pi ‡§™‡§∞ ‡§è‡§ï ‡§∏‡•ç‡§•‡§ø‡§∞ Pi ‡§®‡•ã‡§° ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§ 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡§æ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü‡•§', pricePi: 25, status: 'Active', posterId: 'user_node_tech', image: getImage('Pi+Node+Setup'), category: 'Services', location: 'Global', delivery: 'Digital' },
        ];

        const DUMMY_ORDERS = [
            { id: 'o1', item: 'iPhone 14 Pro', price: 450, status: 'Shipped', tracking: 'TRK001', delivery: 'Local', buyer: 'user_xyz', seller: DUMMY_USER_ID, escrow: 'Active' },
            { id: 'o2', item: 'Laptop Repair Service', price: 35, status: 'Delivered', tracking: 'TRK002', delivery: 'Global', buyer: DUMMY_USER_ID, seller: 'user_node_tech', escrow: 'Released' },
            { id: 'o3', item: 'Old Bicycle', price: 5, status: 'Pending Payment', tracking: 'TRK003', delivery: 'Local', buyer: DUMMY_USER_ID, seller: 'user_e4f5g6h7', escrow: 'Pending' },
        ];
        
        // --- Shared Components: Nav, Header ---

        const NavButton = ({ title, page, currentPage, setPage }) => (
            <button
                onClick={() => setPage(page)}
                className={`px-3 py-2 rounded-lg text-sm font-medium transition duration-200 ${
                    currentPage === page ? 'bg-indigo-600 text-white shadow-lg' : 'text-gray-600 hover:bg-gray-100'
                } whitespace-nowrap`}
            >
                {title}
            </button>
        );

        const Header = ({ currentPage, setPage }) => (
            <header className="bg-white shadow-md sticky top-0 z-20">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row justify-between items-center">
                    <h1 className="text-3xl font-extrabold text-indigo-600 mb-2 sm:mb-0">
                        Barter-<span className="text-yellow-500">Pi</span> Pro
                    </h1>
                    <div className="flex space-x-2 overflow-x-auto pb-1">
                        <NavButton title="‡§π‡•ã‡§Æ" page="Home" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤" page="Profile" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="‡§ö‡•à‡§ü" page="Chat" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="‡§ë‡§∞‡•ç‡§°‡§∞‡•ç‡§∏" page="Orders" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="AI ‡§π‡•á‡§≤‡•ç‡§™‡§∞" page="AIHelper" currentPage={currentPage} setPage={setPage} />
                        {DUMMY_USER_ID === ADMIN_ID && (
                            <NavButton title="‡§è‡§°‡§Æ‡§ø‡§®" page="Admin" currentPage={currentPage} setPage={setPage} />
                        )}
                    </div>
                    <div className="text-sm text-gray-600 text-right mt-2 sm:mt-0">
                         {/* Language Toggle */}
                        <select className="bg-gray-100 p-1 rounded text-xs">
                            <option>üåê Hindi</option>
                            <option>üåê English</option>
                        </select>
                        <span className="font-mono text-xs bg-gray-100 p-1 rounded block mt-1 leading-tight overflow-x-auto whitespace-nowrap">
                            {DUMMY_USER_ID} <span role="img" aria-label="Verified">‚úÖ</span>
                        </span>
                    </div>
                </div>
            </header>
        );

        // --- Listing Detail Modal ---
        const ListingDetailModal = ({ isOpen, onClose, listing }) => {
            if (!isOpen || !listing) return null;
            
            const handleBarterOffer = () => {
                alert(`Barter Offer initiated for ${listing.itemName}. Opening Barter Comparison Tool...`);
            }

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start pt-10 p-4">
                    <div className="bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-y-auto max-h-[90vh] animate-in slide-in-from-top-4 duration-300">
                        <div className="p-6 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                            <h2 className="text-2xl font-bold text-gray-800">{listing.itemName}</h2>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600 text-3xl font-light">&times;</button>
                        </div>
                        <div className="p-6 space-y-6">
                            <img src={listing.image.replace('400x300', '600x400')} alt={listing.itemName} className="w-full h-64 object-cover rounded-lg shadow-md" />
                            
                            {listing.category === 'Services' && (
                                <div className="bg-blue-100 text-blue-800 p-3 rounded-lg font-semibold text-sm flex items-center">
                                    <span role="img" aria-label="NFT" className="mr-2">üñºÔ∏è</span> ‡§Ø‡§π ‡§è‡§ï ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•á‡§µ‡§æ/NFT ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§π‡•à‡•§ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§∏‡•á ‡§π‡•ã‡§ó‡•Ä‡•§
                                </div>
                            )}

                            <div className="flex justify-between items-center border-b pb-4">
                                <div className="text-4xl font-extrabold text-indigo-600">{listing.pricePi} Pi</div>
                                <span className="px-4 py-2 text-md font-bold rounded-full bg-green-100 text-green-700">{listing.status}</span>
                            </div>
                            <p className="text-gray-700 leading-relaxed">{listing.description}</p>
                            <div className="grid grid-cols-2 gap-4 text-sm text-gray-600 border-t pt-4">
                                <div><span className="font-semibold">Category:</span> {listing.category}</div>
                                <div><span className="font-semibold">Rating:</span> ‚≠ê‚≠ê‚≠ê‚≠ê (4.5/5)</div>
                                <div><span className="font-semibold">Location:</span> {listing.location}</div>
                                <div><span className="font-semibold">Delivery:</span> {listing.delivery}</div>
                            </div>
                            
                            <div className="space-y-3 pt-4 border-t">
                                <button className="w-full bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 rounded-lg transition shadow-md" onClick={() => alert(`Initiating Pi Escrow Payment for ${listing.pricePi} Pi...`)}>
                                    <span role="img" aria-label="Pay">üí≥</span> Pi ‡§∏‡•á ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç (Escrow)
                                </button>
                                <button className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition shadow-md" onClick={handleBarterOffer}>
                                    <span role="img" aria-label="Barter">ü§ù</span> ‡§Ü‡§á‡§ü‡§Æ ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§ë‡§´‡§∞ ‡§¶‡•á‡§Ç
                                </button>
                                <button className="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 rounded-lg transition shadow-md" onClick={() => alert('Opening Chat with Seller...')}>
                                    <span role="img" aria-label="Chat">üí¨</span> ‡§ö‡•à‡§ü ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Listing Card Component ---
        const ListingCard = ({ listing, onClick }) => (
            <div 
                className="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-2xl hover:cursor-pointer transition duration-300 transform hover:scale-[1.02]"
                onClick={() => onClick(listing)}
            >
                <img src={listing.image} alt={listing.itemName} className="w-full h-40 object-cover" />
                <div className="p-4">
                    <h3 className="text-lg font-bold text-gray-800 mb-1 h-12 overflow-hidden">{listing.itemName}</h3>
                    <p className="text-xs text-gray-500 mb-3 h-8 overflow-hidden">{listing.description}</p>
                    
                    <div className="flex justify-between items-center mb-3">
                        <div className="text-2xl font-extrabold text-indigo-600">
                            {listing.pricePi} Pi
                        </div>
                        <span className={`px-3 py-1 text-xs font-medium rounded-full ${listing.status === 'Active' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}`}>
                            {listing.status}
                        </span>
                    </div>
                    <button className="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 rounded-lg text-sm transition">
                        <span role="img" aria-label="Details">‚ÑπÔ∏è</span> ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§ñ‡•á‡§Ç
                    </button>
                </div>
            </div>
        );

        // --- New Listing Modal Component ---
        const NewListingModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;

            const handleSubmit = (e) => {
                e.preventDefault();
                alert('‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§°‡•ç‡§∞‡§æ‡§´‡•ç‡§ü ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ! ‡§Ø‡§π Pi ‡§Æ‡•â‡§°‡§∞‡•á‡§ü‡§∞ ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§π‡•à‡•§');
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start pt-10 p-4">
                    <div className="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-y-auto max-h-[90vh]">
                        <div className="p-6 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                            <h2 className="text-2xl font-bold text-gray-800">‡§®‡§Ø‡§æ ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h2>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600 text-3xl font-light">&times;</button>
                        </div>
                        <form onSubmit={handleSubmit} className="p-6 space-y-4">
                            <input type="text" required placeholder="‡§Ü‡§á‡§ü‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" />
                            <textarea required placeholder="‡§Ü‡§á‡§ü‡§Æ ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£..." rows="4" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                            
                            <button type="button" className="w-full bg-yellow-100 text-yellow-700 font-semibold py-2 rounded-lg hover:bg-yellow-200 transition">
                                <span role="img" aria-label="AI">üí°</span> AI ‡§∏‡•á **‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ Pi ‡§Æ‡•Ç‡§≤‡•ç‡§Ø** ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç
                            </button>

                            <input type="number" required placeholder="Pi ‡§Æ‡•á‡§Ç ‡§ï‡•Ä‡§Æ‡§§" step="0.01" min="0.01" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" />
                            <select className="w-full p-3 border border-gray-300 rounded-lg">
                                <option value="">--- ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç ---</option>
                                <option value="Electronics">Electronics</option>
                                <option value="Services">Services</option>
                                <option value="Vehicles">Vehicles</option>
                                <option value="NFT/Digital">NFT/Digital</option>
                            </select>

                            <div className="border border-dashed border-gray-400 p-4 rounded-lg text-center">
                                <label className="block text-sm font-medium text-gray-700 mb-1">‡§õ‡§µ‡§ø/‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§Ö‡§™‡§≤‡•ã‡§°</label>
                                <input type="file" multiple className="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"/>
                            </div>
                            
                            <div className="flex justify-end pt-4 border-t">
                                <button type="submit" className="bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition shadow-md">‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };
        
        // --- Page Components ---

        // 6. Profile Page
        const ProfilePage = ({ setPage }) => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);

            const handlePiLogin = () => {
                alert('Initiating Pi Network SDK Authentication (Pi.authenticate())...');
                setIsLoggedIn(true);
            };

            const SellerDashboard = () => (
                <div className="space-y-6">
                    <h3 className="text-2xl font-bold text-gray-800 border-b pb-2">üìä ‡§∏‡•á‡§≤‡§∞ ‡§è‡§®‡§æ‡§≤‡§ø‡§ü‡§ø‡§ï‡•ç‡§∏</h3>
                    <div className="grid grid-cols-2 gap-4">
                        <div className="bg-green-50 p-4 rounded-lg shadow-sm">
                            <p className="text-xl font-extrabold text-green-600">32,500 Pi</p>
                            <p className="text-sm text-gray-600">‡§ï‡•Å‡§≤ ‡§Ö‡§∞‡•ç‡§ú‡§ø‡§§ (All Time)</p>
                        </div>
                         <div className="bg-blue-50 p-4 rounded-lg shadow-sm">
                            <p className="text-xl font-extrabold text-blue-600">4.8/5 ‚≠ê</p>
                            <p className="text-sm text-gray-600">‡§î‡§∏‡§§ ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó</p>
                        </div>
                    </div>
                     <button className="w-full bg-indigo-500 text-white py-3 rounded-lg font-bold hover:bg-indigo-600" onClick={() => alert('Generating Annual Tax Report...')}>
                        <span role="img" aria-label="Report">üìë</span> ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§ü‡•ç‡§∞‡•á‡§° ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü (CSV)
                    </button>
                    <h3 className="text-xl font-semibold text-gray-800 pt-4 border-t">‡§Æ‡•á‡§∞‡•Ä ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h3>
                    <ul className="space-y-2">
                        {DUMMY_LISTINGS.filter(l => l.posterId === DUMMY_USER_ID).map(l => (
                            <li key={l.id} className="p-3 border rounded-lg bg-white flex justify-between items-center">
                                <span className="font-medium">{l.itemName}</span>
                                <span className="text-indigo-600 font-bold">{l.pricePi} Pi</span>
                            </li>
                        ))}
                    </ul>
                </div>
            );

            return (
                <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
                    <div className="bg-white p-8 rounded-xl shadow-xl">
                        <h2 className="text-3xl font-bold text-indigo-600 mb-6">üë§ ‡§Æ‡•á‡§∞‡§æ Pi ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤</h2>
                        
                        {!isLoggedIn ? (
                            <div className="text-center space-y-4">
                                <p className="text-lg text-gray-600">Pi Network SDK ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç</p>
                                <button 
                                    className="bg-yellow-500 text-gray-900 font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-yellow-400 transition text-xl"
                                    onClick={handlePiLogin}
                                >
                                    <span role="img" aria-label="Pi">‚õèÔ∏è</span> Pi Login
                                </button>
                                <p className="text-xs text-gray-400 mt-2">‡§∏‡§ø‡§∞‡•ç‡§´‡§º KYC-‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§™‡§æ‡§Ø‡§®‡§ø‡§Ø‡§∞ ‡§π‡•Ä Barter Pro ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
                            </div>
                        ) : (
                            <div className="space-y-6">
                                <div className="flex items-center space-x-4 border-b pb-4">
                                    <div className="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center text-3xl font-bold text-indigo-600">P</div>
                                    <div>
                                        <p className="text-2xl font-bold">ADM_PRO_USER_007 <span className="text-green-500 text-xl">‚úÖ KYC Verified</span></p>
                                        <p className="text-sm text-gray-600 font-mono break-all">Pi Wallet Public Key: G6Q7...X0F8</p>
                                        <div className="mt-1 flex space-x-2">
                                            <span className="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-medium">Verified Pioneer</span>
                                        </div>
                                    </div>
                                </div>
                                <SellerDashboard />
                            </div>
                        )}
                    </div>
                </div>
            );
        };
        
        // 5. Orders Page (Advanced Tracking, Escrow, Dispute)
        const OrdersPage = () => {
            const myOrders = DUMMY_ORDERS.filter(o => o.buyer === DUMMY_USER_ID);
            const sellingOrders = DUMMY_ORDERS.filter(o => o.seller === DUMMY_USER_ID && o.buyer !== DUMMY_USER_ID);

            const handleTrackingUpdate = (orderId) => {
                const newTracking = prompt(`Enter new tracking status for ${orderId}:`);
                if (newTracking) alert(`Tracking updated for ${orderId}: ${newTracking}`);
            };

            const handleConfirmDelivery = (orderId) => {
                 alert(`Confirming delivery for ${orderId}. Pi Escrow will be released to the seller!`);
            };

            const handleDispute = (orderId) => {
                alert(`Opening dispute for ${orderId}. Escrow funds are frozen. Moderation review initiated.`);
            };

            const getEscrowStatus = (status) => {
                if (status === 'Active') return <span className="text-yellow-700 bg-yellow-100 p-1 rounded font-semibold text-xs">üîí Escrow Active</span>;
                if (status === 'Released') return <span className="text-green-700 bg-green-100 p-1 rounded font-semibold text-xs">‚úÖ Pi Released</span>;
                return <span className="text-gray-700 bg-gray-100 p-1 rounded font-semibold text-xs">‚è≥ {status}</span>;
            };

            return (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-10">
                    <h2 className="text-3xl font-bold text-indigo-600 border-b pb-3">Order ‡§î‡§∞ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó (Escrow Supported)</h2>
                    
                    {/* Buying Orders */}
                    <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                        <h3 className="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">üì¶ ‡§Æ‡•á‡§∞‡•á ‡§ñ‡§º‡§∞‡•Ä‡§¶‡•á ‡§ó‡§è ‡§ë‡§∞‡•ç‡§°‡§∞‡•ç‡§∏ ({myOrders.length})</h3>
                        
                        {myOrders.length > 0 ? myOrders.map(order => (
                            <div key={order.id} className="mb-4 p-4 border border-gray-100 rounded-lg shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center bg-blue-50 hover:shadow-md transition">
                                <div>
                                    <p className="font-semibold text-lg">{order.item} {getEscrowStatus(order.escrow)}</p>
                                    <p className="text-sm text-gray-500">‡§ï‡•Ä‡§Æ‡§§: **{order.price} Pi** | ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó: {order.tracking}</p>
                                </div>
                                <div className="text-right mt-2 sm:mt-0 space-y-1">
                                    <span className={`px-3 py-1 text-sm font-bold rounded-full block ${order.status === 'Delivered' ? 'bg-green-500 text-white' : 'bg-yellow-500 text-gray-900'}`}>
                                        {order.status}
                                    </span>
                                    {order.status === 'Shipped' && (
                                        <button onClick={() => handleConfirmDelivery(order.id)} className="text-green-600 text-sm hover:underline block font-semibold">‚úÖ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç</button>
                                    )}
                                    {order.status !== 'Delivered' && (
                                        <button onClick={() => handleDispute(order.id)} className="text-red-600 text-sm hover:underline block font-semibold">‚ùì ‡§µ‡§ø‡§µ‡§æ‡§¶ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</button>
                                    )}
                                </div>
                            </div>
                        )) : <p className="text-gray-500">‡§ï‡•ã‡§à ‡§ñ‡§º‡§∞‡•Ä‡§¶‡§æ ‡§ó‡§Ø‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</p>}
                    </div>

                    {/* Selling Orders */}
                    <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                        <h3 className="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">üì§ ‡§Æ‡•á‡§∞‡•á ‡§¨‡•á‡§ö‡•á ‡§ó‡§è ‡§ë‡§∞‡•ç‡§°‡§∞‡•ç‡§∏ ({sellingOrders.length})</h3>
                        
                        {sellingOrders.length > 0 ? sellingOrders.map(order => (
                             <div key={order.id} className="mb-4 p-4 border border-gray-100 rounded-lg shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center bg-green-50 hover:shadow-md transition">
                                <div>
                                    <p className="font-semibold text-lg">{order.item} {getEscrowStatus(order.escrow)}</p>
                                    <p className="text-sm text-gray-500">‡§ï‡•Ä‡§Æ‡§§: **{order.price} Pi** | Buyer ID: {order.buyer}</p>
                                </div>
                                <div className="text-right mt-2 sm:mt-0 space-y-1">
                                    <button onClick={() => handleTrackingUpdate(order.id)} className="bg-indigo-600 text-white py-2 px-4 rounded-lg text-sm font-semibold hover:bg-indigo-700">
                                        ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
                                    </button>
                                </div>
                            </div>
                        )) : <p className="text-gray-500">‡§ï‡•ã‡§à ‡§¨‡•á‡§ö‡§æ ‡§ó‡§Ø‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</p>}
                    </div>
                </div>
            );
        };

        // 4. AI Helper Page (Enhanced)
        const AIHelperPage = () => {
            const [input, setInput] = useState('');
            const [messages, setMessages] = useState([
                { sender: 'AI', text: '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç Barter-Pi Pro ‡§ï‡§æ **Gemini AI** ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§¨‡§®‡§æ‡§®‡•á, Pi ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§£ ‡§Ø‡§æ ‡§ü‡•ç‡§∞‡•á‡§°‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§' }
            ]);

            const handleSend = (e) => {
                e.preventDefault();
                if (input.trim() === '') return;

                const newMessage = { sender: 'User', text: input.trim() };
                setMessages([...messages, newMessage]);
                setInput('');

                // Dummy AI Response
                setTimeout(() => {
                    let aiResponseText = `‡§Ø‡§π ‡§è‡§ï ‡§°‡§Æ‡•Ä AI ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§π‡•à: ‡§Ü‡§™‡§®‡•á ‡§™‡•Ç‡§õ‡§æ "${newMessage.text}"‡•§ Escrow ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§∏‡§¨‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§π‡•à!`;
                    if (newMessage.text.toLowerCase().includes('price') || newMessage.text.toLowerCase().includes('‡§Æ‡•Ç‡§≤‡•ç‡§Ø')) {
                         aiResponseText = `‡§™‡§ø‡§õ‡§≤‡•á 7 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§ï‡•á ‡§ü‡•ç‡§∞‡•á‡§Ç‡§° ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞, ‡§á‡§∏ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ï‡•á ‡§Ü‡§á‡§ü‡§Æ ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ Pi ‡§Æ‡•Ç‡§≤‡•ç‡§Ø **150 Pi** ‡§π‡•à‡•§`;
                    }
                    if (newMessage.text.toLowerCase().includes('tax') || newMessage.text.toLowerCase().includes('‡§ï‡§∞')) {
                         aiResponseText = `‡§Æ‡•à‡§Ç ‡§ï‡§∞ ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Ç‡§Å, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§ï‡§∞ ‡§ï‡§æ‡§®‡•Ç‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•Ä ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§ü‡•ç‡§∞‡•á‡§° ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•á ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§`;
                    }
                    const aiResponse = { sender: 'AI', text: aiResponseText };
                    setMessages(msgs => [...msgs, aiResponse]);
                }, 1500);
            };

            return (
                <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <div className="p-6 bg-white rounded-xl shadow-lg h-[650px] flex flex-col border border-indigo-200">
                        <h2 className="text-2xl font-bold text-indigo-600 mb-4 border-b pb-2">ü§ñ AI ‡§π‡•á‡§≤‡•ç‡§™‡§∞ (Gemini Pro)</h2>
                        <div className="flex-grow bg-gray-50 p-4 rounded-lg overflow-y-scroll space-y-4 mb-4">
                            {messages.map((msg, index) => (
                                <div key={index} className={`flex ${msg.sender === 'User' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`max-w-lg p-3 rounded-xl shadow-md ${
                                        msg.sender === 'User' ? 'bg-indigo-600 text-white rounded-tr-none' : 'bg-gray-200 text-gray-800 rounded-tl-none'
                                    }`}>
                                        {msg.text}
                                    </div>
                                </div>
                            ))}
                        </div>
                        <form onSubmit={handleSend} className="flex space-x-2">
                            <input
                                type="text"
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                placeholder="Gemini ‡§∏‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç..."
                                className="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"
                            />
                            <button type="submit" className="bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition">
                                Send <span role="img" aria-label="Rocket">üöÄ</span>
                            </button>
                        </form>
                    </div>
                </div>
            );
        };
        
        // 3. Admin Page (Enhanced Moderation)
        const AdminPage = () => {
            const pendingReviews = DUMMY_LISTINGS.filter(l => l.status === 'Pending');
            const activeDisputes = DUMMY_ORDERS.filter(o => o.escrow === 'Active' && o.status !== 'Delivered');

            return (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
                    <h2 className="text-3xl font-bold text-red-600 border-b pb-3">üö® ‡§è‡§°‡§Æ‡§ø‡§® ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° (PRO Access)</h2>
                    
                    <div className="bg-white p-6 rounded-xl shadow-lg border-l-4 border-yellow-600">
                        <h3 className="text-xl font-semibold text-gray-800 mb-4">‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ({pendingReviews.length})</h3>
                        <ul className="space-y-3">
                            {pendingReviews.map(l => (
                                <li key={l.id} className="p-3 border rounded-lg flex justify-between items-center bg-yellow-50">
                                    <span className="font-medium">{l.itemName} ({l.pricePi} Pi)</span>
                                    <div>
                                        <button className="text-green-600 hover:text-green-800 text-sm font-semibold mr-3">‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
                                        <button className="text-red-600 hover:text-red-800 text-sm font-semibold">‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
                                    </div>
                                </li>
                            ))}
                        </ul>
                    </div>

                    <div className="bg-white p-6 rounded-xl shadow-lg border-l-4 border-red-600">
                        <h3 className="text-xl font-semibold text-gray-800 mb-4">‡§µ‡§ø‡§µ‡§æ‡§¶ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ({activeDisputes.length})</h3>
                        <ul className="space-y-3">
                            {activeDisputes.map(o => (
                                <li key={o.id} className="p-3 border rounded-lg flex justify-between items-center bg-red-50">
                                    <span className="font-medium">Order {o.id}: {o.item}</span>
                                    <div>
                                        <button className="text-blue-600 hover:text-blue-800 text-sm font-semibold mr-3">‡§ï‡•á‡§∏ ‡§ñ‡•ã‡§≤‡•á‡§Ç</button>
                                        <button className="text-green-600 hover:text-green-800 text-sm font-semibold">Pi ‡§∞‡§ø‡§≤‡•Ä‡§ú‡§º ‡§ï‡§∞‡•á‡§Ç</button>
                                    </div>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            );
        };

        // 2. Chat Page (Remains the same as previous)
        const ChatPage = () => (
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div className="p-4 sm:p-8 bg-white rounded-xl shadow-lg h-[700px] flex border border-gray-200">
                    <div className="flex flex-col w-full md:w-1/3 border-r pr-4 space-y-2 overflow-y-auto">
                        <h3 className="font-bold text-lg mb-2 text-indigo-600">‡§Æ‡•á‡§∞‡•Ä ‡§ö‡•à‡§ü‡•ç‡§∏</h3>
                        <div className="px-3 py-3 bg-indigo-100 text-indigo-700 rounded-xl font-semibold border-l-4 border-indigo-600 cursor-pointer">
                            üí¨ **iPhone 14 Pro** (Buyer)
                        </div>
                        <div className="px-3 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 cursor-pointer">
                            üí¨ **Pi Node Setup** (Seller)
                        </div>
                        <div className="px-3 py-3 bg-yellow-100 text-yellow-700 rounded-xl hover:bg-yellow-200 cursor-pointer">
                            ü§ñ **AI Helper Chat**
                        </div>
                    </div>
                    <div className="flex flex-col w-full md:w-2/3 md:pl-4">
                        <h2 className="text-xl font-bold text-gray-800 mb-4 border-b pb-2">iPhone 14 Pro (Chat with Seller)</h2>
                        <div className="flex-grow bg-gray-50 p-4 rounded-lg overflow-y-scroll space-y-4">
                            <div className="flex justify-start items-start">
                                <img src={getImage('User')} alt="User" className="w-8 h-8 rounded-full mr-3 border-2 border-indigo-500"/>
                                <div>
                                    <div className="bg-white p-3 rounded-xl rounded-tl-none max-w-xs shadow-md">‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§ï‡•ç‡§Ø‡§æ 400 Pi ‡§†‡•Ä‡§ï ‡§∞‡§π‡•á‡§ó‡§æ?</div>
                                </div>
                            </div>
                            <div className="flex justify-end items-start">
                                <div className="text-right">
                                    <div className="bg-indigo-100 p-3 rounded-xl rounded-tr-none max-w-xs shadow-md">450 Pi ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§π‡•à‡•§</div>
                                </div>
                                <img src={getImage('Me')} alt="Me" className="w-8 h-8 rounded-full ml-3 border-2 border-green-500"/>
                            </div>
                        </div>
                        <div className="mt-4 flex space-x-2">
                            <input type="text" placeholder="‡§Æ‡•à‡§∏‡•á‡§ú ‡§≤‡§ø‡§ñ‡•á‡§Ç..." className="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" />
                            <button className="bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        );

        // 1. Home Page (Enhanced Mapping, Filters, Barter/NFT Focus)
        const HomePage = ({ setPage }) => {
            const [isNewListingModalOpen, setIsNewListingModalOpen] = useState(false);
            const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);
            const [selectedListing, setSelectedListing] = useState(null);
            const [filterCategory, setFilterCategory] = useState('');
            const [filterScope, setFilterScope] = useState('Global');
            
            const openDetailModal = (listing) => {
                setSelectedListing(listing);
                setIsDetailModalOpen(true);
            };

            const filteredListings = DUMMY_LISTINGS.filter(listing => {
                const categoryMatch = filterCategory ? listing.category === filterCategory : true;
                const scopeMatch = filterScope === 'Global' || listing.location === filterScope;
                return categoryMatch && scopeMatch;
            }).sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());

            return (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
                    {/* Pi Wallet Snapshot */}
                    <div className="bg-indigo-600 p-6 rounded-xl shadow-xl text-white flex justify-between items-center">
                        <div>
                            <p className="text-lg font-semibold mb-1">Pi Wallet Balance (Mainnet)</p>
                            <h2 className="text-5xl font-extrabold">12,456.78 <span className="text-yellow-400">Pi</span></h2>
                            <p className="text-sm opacity-80 mt-1">**~$2,990.00 USD** | <span className="text-red-300">Pi Price Tracker</span></p>
                        </div>
                        <button 
                            className="bg-yellow-500 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-yellow-400 transition"
                            onClick={() => alert('Opening Pi Browser Wallet for external connect...')}
                        >
                            <span role="img" aria-label="Connect">üîó</span> External Wallet Connect
                        </button>
                    </div>

                    {/* Search and Mapping */}
                    <div className="bg-white p-6 rounded-xl shadow-lg border border-indigo-100">
                        <h2 className="text-xl font-bold text-gray-800 mb-3">‡§≤‡•ã‡§ï‡§≤ / ‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç</h2>
                        <div className="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mb-4">
                            <input type="text" placeholder="‡§Ü‡§á‡§ü‡§Æ ‡§Ø‡§æ ‡§ï‡•Ä‡§µ‡§∞‡•ç‡§° ‡§ñ‡•ã‡§ú‡•á‡§Ç..." className="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" />
                            <select 
                                className="p-3 border border-gray-300 rounded-lg"
                                value={filterScope}
                                onChange={(e) => setFilterScope(e.target.value)}
                            >
                                <option value="Global">‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤</option>
                                <option value="Local">‡§≤‡•ã‡§ï‡§≤ (50km)</option>
                            </select>
                            <button className="bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition">Search</button>
                        </div>
                        <div className="h-40 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500">
                            [Google Maps API / Pi Local Listing Markers Placeholder]
                        </div>
                    </div>
                    
                    {/* Filters and Sorting */}
                    <div className="flex space-x-3 justify-between items-center p-4 bg-white rounded-xl shadow-lg">
                        <select 
                            className="p-2 border rounded-lg"
                            value={filterCategory}
                            onChange={(e) => setFilterCategory(e.target.value)}
                        >
                            <option value="">‡§∏‡§≠‡•Ä ‡§ï‡•à‡§ü‡•á‡§ó‡§∞‡•Ä</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Services">Services</option>
                            <option value="Vehicles">Vehicles</option>
                            <option value="NFT/Digital">NFT/Digital</option>
                        </select>
                        <select className="p-2 border rounded-lg">
                            <option>‡§∏‡•â‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç: ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ</option>
                            <option>‡§∏‡•â‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç: ‡§∏‡§¨‡§∏‡•á ‡§∏‡§∏‡•ç‡§§‡§æ Pi</option>
                            <option>‡§∏‡•â‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç: ‡§∏‡§∞‡•ç‡§µ‡§∂‡•ç‡§∞‡•á‡§∑‡•ç‡§† ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó</option>
                        </select>
                         <button 
                            className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition"
                            onClick={() => setIsNewListingModalOpen(true)}
                        >
                            + ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                        </button>
                    </div>

                    {/* Latest Listings */}
                    <h2 className="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">‡§≤‡•á‡§ü‡•á‡§∏‡•ç‡§ü ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ({filteredListings.length})</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {filteredListings.length > 0 ? filteredListings.map(listing => (
                            <ListingCard key={listing.id} listing={listing} onClick={openDetailModal} />
                        )) : <p className="col-span-4 text-center text-gray-500 py-10">‡§á‡§∏ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•ã‡§à ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§</p>}
                    </div>
                    
                    <NewListingModal isOpen={isNewListingModalOpen} onClose={() => setIsNewListingModalOpen(false)} />
                    <ListingDetailModal 
                        isOpen={isDetailModalOpen} 
                        onClose={() => setIsDetailModalOpen(false)} 
                        listing={selectedListing} 
                    />
                </div>
            );
        };
        
        // --- Main App Component ---
        const App = () => {
            const [currentPage, setCurrentPage] = useState('Home');

            const renderPage = () => {
                switch (currentPage) {
                    case 'Home':
                        return <HomePage setPage={setCurrentPage} />;
                    case 'Profile':
                        return <ProfilePage setPage={setCurrentPage} />;
                    case 'Chat':
                        return <ChatPage />;
                    case 'Orders':
                        return <OrdersPage />;
                    case 'AIHelper':
                        return <AIHelperPage />;
                    case 'Admin':
                        return <AdminPage />;
                    default:
                        return <HomePage setPage={setCurrentPage} />;
                }
            };

            return (
                <div className="min-h-screen">
                    <Header currentPage={currentPage} setPage={setCurrentPage} />
                    <main className="pb-10">
                        {renderPage()}
                    </main>
                    <footer className="bg-white border-t p-4 text-center text-sm text-gray-500">
                        Barter-Pi Pro | üîí Pi Escrow ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ | Gemini AI ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ | <span className="text-red-500">‡§∏‡§≠‡•Ä ‡§´‡•Ä‡§ö‡§∞‡•ç‡§∏ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§ø‡§è ‡§ó‡§è!</span>
                    </footer>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);

    </script>
</body>
</html>
