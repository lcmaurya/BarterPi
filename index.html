<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Pi Network Barter Application" />
    <title>Barter-Pi Pro - Final UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // --- Static Configuration & Dummy Data ---
        const DUMMY_USER_ID = "ADM_PRO_USER_007";
        const ADMIN_ID = DUMMY_USER_ID; 

        const DUMMY_LISTINGS = [
            { id: 'l1', itemName: 'Apple iPhone 14 Pro', description: '‡§¨‡•ç‡§∞‡§æ‡§Ç‡§° ‡§®‡•ç‡§Ø‡•Ç, 256GB.', pricePi: 450, status: 'Active', posterId: 'user_a01b2c3d', image: 'https://via.placeholder.com/400x300?text=iPhone', timestamp: new Date(Date.now() - 86400000), location: 'Local', delivery: 'Local Pickup' },
            { id: 'l2', itemName: '‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§∏‡§æ‡§á‡§ï‡§ø‡§≤', description: '‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§∂‡•Ä‡§≤ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç‡•§', pricePi: 5, status: 'Active', posterId: 'user_e4f5g6h7', image: 'https://via.placeholder.com/400x300?text=Bicycle', timestamp: new Date(Date.now() - 3600000), location: 'Global', delivery: 'Shipping' },
            { id: 'l3', itemName: '‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§°‡§ø‡§ú‡§æ‡§á‡§® ‡§∏‡•á‡§µ‡§æ', description: '‡§è‡§ï ‡§™‡•á‡§ú ‡§ï‡•Ä ‡§≤‡•à‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§™‡•á‡§ú ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü‡•§', pricePi: 50, status: 'Pending', posterId: 'user_i8j9k0l1', image: 'https://via.placeholder.com/400x300?text=Web+Design', timestamp: new Date(Date.now() - 7200000), location: 'Global', delivery: 'Digital' },
        ];

        const DUMMY_ORDERS = [
            { id: 'o1', item: 'iPhone 14 Pro', price: 450, status: 'Shipped', tracking: 'TRK001', delivery: 'Local' },
            { id: 'o2', item: 'Laptop Repair Service', price: 35, status: 'Delivered', tracking: 'TRK002', delivery: 'Global' },
        ];
        
        // --- Shared Components: Nav, Header, Footer ---

        const NavButton = ({ title, page, currentPage, setPage }) => (
            <button
                onClick={() => setPage(page)}
                className={`px-3 py-2 rounded-lg text-sm font-medium transition duration-200 ${
                    currentPage === page ? 'bg-indigo-600 text-white shadow-lg' : 'text-gray-600 hover:bg-gray-100'
                } whitespace-nowrap`}
            >
                {title}
            </button>
        );

        const Header = ({ currentPage, setPage }) => (
            <header className="bg-white shadow-md sticky top-0 z-20">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row justify-between items-center">
                    <h1 className="text-3xl font-extrabold text-indigo-600 mb-2 sm:mb-0">
                        Barter-<span className="text-yellow-500">Pi</span> Pro
                    </h1>
                    <div className="flex space-x-2 overflow-x-auto pb-1">
                        <NavButton title="Home" page="Home" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="Chat" page="Chat" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="Orders" page="Orders" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="AI Helper" page="AIHelper" currentPage={currentPage} setPage={setPage} />
                        <NavButton title="Admin" page="Admin" currentPage={currentPage} setPage={setPage} />
                    </div>
                    <div className="text-sm text-gray-600 text-right mt-2 sm:mt-0">
                        ‡§Ø‡•Ç‡§ú‡§º‡§∞ ID: 
                        <span className="font-mono text-xs bg-gray-100 p-1 rounded block mt-1 leading-tight overflow-x-auto whitespace-nowrap">
                            {DUMMY_USER_ID}
                        </span>
                    </div>
                </div>
            </header>
        );

// --- Listing Card Component ---
        const ListingCard = ({ listing }) => (
            <div className="bg-white rounded-xl shadow-xl overflow-hidden border border-gray-200 hover:shadow-2xl transition duration-300">
                <img src={listing.image} alt={listing.itemName} className="w-full h-40 object-cover" />
                <div className="p-4">
                    <h3 className="text-lg font-bold text-gray-800 mb-1">{listing.itemName}</h3>
                    <p className="text-xs text-gray-500 mb-3 h-8 overflow-hidden">{listing.description}</p>
                    
                    <div className="flex justify-between items-center mb-3">
                        <div className="text-xl font-extrabold text-indigo-600">
                            {listing.pricePi} Pi
                        </div>
                        <span className={`px-3 py-1 text-xs font-medium rounded-full ${listing.status === 'Active' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}`}>
                            {listing.status}
                        </span>
                    </div>

                    <div className="space-y-2 pt-2 border-t border-dashed">
                        <button 
                            className="w-full bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 rounded-lg text-sm transition"
                            onClick={() => alert(`Connecting Pi Wallet for ${listing.pricePi} Pi...`)}
                        >
                            <span role="img" aria-label="Wallet">üí∞</span> Pi Payment (QR)
                        </button>
                        <button className="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 rounded-lg text-sm transition">
                            <span role="img" aria-label="Chat">üí¨</span> Seller ‡§∏‡•á Chat ‡§ï‡§∞‡•á‡§Ç
                        </button>
                    </div>
                </div>
            </div>
        );
// --- New Listing Modal Component ---
        const NewListingModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4">
                    <div className="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-y-auto max-h-full">
                        <div className="p-6 border-b flex justify-between items-center">
                            <h2 className="text-2xl font-bold text-gray-800">‡§®‡§Ø‡§æ ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h2>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>
                        </div>
                        <div className="p-6 space-y-4">
                            <input type="text" placeholder="‡§Ü‡§á‡§ü‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ (‡§ú‡•à‡§∏‡•á iPhone 14 Pro)" className="w-full p-3 border border-gray-300 rounded-lg" />
                            <textarea placeholder="‡§Ü‡§á‡§ü‡§Æ ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£..." rows="4" className="w-full p-3 border border-gray-300 rounded-lg"></textarea>
                            
                            {/* AI Description Feature */}
                            <button className="w-full bg-blue-100 text-blue-700 font-semibold py-2 rounded-lg hover:bg-blue-200 transition">
                                <span role="img" aria-label="AI">ü§ñ</span> AI ‡§∏‡•á ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ú‡§®‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
                            </button>

                            <input type="number" placeholder="Pi ‡§Æ‡•á‡§Ç ‡§ï‡•Ä‡§Æ‡§§ (‡§ú‡•à‡§∏‡•á 450 Pi)" className="w-full p-3 border border-gray-300 rounded-lg" />
                            
                            {/* Image/Video Upload */}
                            <div className="border border-dashed border-gray-400 p-4 rounded-lg text-center">
                                <label className="block text-sm font-medium text-gray-700 mb-1">Image/Video Upload (Dummy)</label>
                                <input type="file" className="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"/>
                            </div>
                        </div>
                        <div className="p-6 border-t flex justify-end">
                            <button onClick={onClose} className="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg mr-3 hover:bg-gray-300">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                            <button className="bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700">‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç (Dummy Save)</button>
                        </div>
                    </div>
                </div>
            );
        };

        const HomePage = ({ setPage }) => {
            const [isModalOpen, setIsModalOpen] = React.useState(false);
            const sortedListings = DUMMY_LISTINGS.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
            return (
                <div className="space-y-8">
                    {/* Search and Mapping */}
                    <div className="bg-white p-6 rounded-xl shadow-lg border border-indigo-100">
                        <h2 className="text-xl font-bold text-gray-800 mb-3">‡§≤‡•ã‡§ï‡§≤/‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞</h2>
                        <div className="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mb-4">
                            <input type="text" placeholder="‡§Ü‡§á‡§ü‡§Æ ‡§Ø‡§æ ‡§ï‡•Ä‡§µ‡§∞‡•ç‡§° ‡§ñ‡•ã‡§ú‡•á‡§Ç..." className="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" />
                            <select className="p-3 border border-gray-300 rounded-lg">
                                <option>‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤</option>
                                <option>‡§≤‡•ã‡§ï‡§≤ (50km)</option>
                            </select>
                            <button className="bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700">Search</button>
                        </div>
                        <div className="h-40 bg-gray-200 rounded-lg flex items-center justify-center text-gray-500">
                            [Global/Local Mapping Placeholder - Dummy]
                        </div>
                    </div>

                    {/* Latest Listings */}
                    <h2 className="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">‡§≤‡•á‡§ü‡•á‡§∏‡•ç‡§ü ‡§¨‡§æ‡§∞‡•ç‡§ü‡§∞ ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {sortedListings.map(listing => (
                            <ListingCard key={listing.id} listing={listing} />
                        ))}
                    </div>

                    {/* Post New Section */}
                    <section className="p-8 bg-yellow-50 border border-yellow-200 rounded-xl shadow-lg">
                        <h2 className="text-xl font-semibold text-yellow-800 mb-4">‡§è‡§ï ‡§®‡§à ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç (Seller Section)</h2>
                        <button 
                            className="w-full bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-xl transition"
                            onClick={() => setIsModalOpen(true)}
                        >
                            + ‡§®‡§à ‡§≤‡§ø‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç
                        </button>
                    </section>
                    
                    <NewListingModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />
                </div>
            );
        };